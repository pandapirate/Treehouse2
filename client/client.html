<head>
  <title>Treehouse 2.0</title>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
</head>

<body>
  {{> loginButtons align="right"}}<br>
  <h1>Treehouse 2.0</h1>

  {{> welcome }}

  {{#if selectedRoom}}
    <p>
      Currently Room: {{currentRoom}}
    </p>
    <button class="leaveRoom">Leave Room</button><br/><br>
    {{> messages }}
    {{> input }}
  {{else}}
    {{> createRoom}}
    {{> rooms}}
  {{/if}}
</body>

<template name="welcome">
  {{#if currentUser}}
  <p>
    Welcome {{currentUser.profile.name}}
  </p>
  {{else}}
  <p>
    Please login to post as yourself or post as Squirrel
  </p>
  {{/if}}
</template>

<template name="messages">
  <ul class="fa-ul">
    {{#each parentMessages}}
      {{> msg}}
    {{/each}}
  </ul>
</template>

<template name="msg">
  <li id={{_id}}><i class="toggle fa {{#if hasChildren}}fa-caret-square-o-down{{else}}fa-caret-square-o-right{{/if}}"></i><strong>{{name}}:</strong> {{message}} <i class="fa fa-reply response"></i></li>
  {{#if hasResponse}}
    <li><i class="fa fa-arrow-right"></i><input type="text" id="ResponseMessage"><button id="ResponseButton">Submit</button></li>
  {{/if}}

  {{#if hasChildren}}
  <ul class="fa-ul">
    {{#each children}}
      {{> msg}}
    {{/each}}
  </ul>
  {{/if}}
</template>

<template name="input">
  <p>Message: <input type="text" id="message"></p>
  <!-- <p><button class="hideAll">Collapse All</button><button class="openAll">Open All</button></p> -->
</template>

<template name="createRoom">
  <p>
    <button class="createRoomButton">Create Room</button>
  </p>
</template>

<template name="rooms">
    {{#each chatrooms}}
      {{> room}}
    {{/each}}
</template>

<template name="room">
  <p><i class="fa fa-cloud"></i> {{name}} <button class="selectRoom">Join</button></p>
</template>
